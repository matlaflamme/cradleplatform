<?xml version="1.0" encoding="UTF-8"?>
<TestSuite>
  <TestCase name="Get All Patients">
    <Request method="GET" uri="/api/patient/all"/>
    <Response status="200"/>
    <!--
      TODO: Find a way to ensure the state of the database so that the body of
        responses can be tested or implement more generic assertions instead of
        just JSON equivalence.
    -->
  </TestCase>

  <TestCase name="Valid Get Patient Info">
    <Request method="GET" uri="/api/patient/001/info"/>
    <Response status="200">
      <![CDATA[
      {
        "id":"001",
        "name":"Harumi Youko",
        "villageNumber":"1",
        "zoneNumber":"1",
        "birthYear":1995,
        "sex":1,
        "medicalHistory":null,
        "drugHistory":null,
        "lastUpdated":"2019-09-20 20:12:32"
      }
      ]]>
    </Response>
  </TestCase>

  <TestCase name="Request For Non-existant Patient">
    <Request method="GET" uri="/api/patient/X/info"/>
    <Response status="404">
      <![CDATA[
      {
        "code":404,
        "error":"Not Found",
        "message":"entity with id 'X' not found"
      }
      ]]>
    </Response>
  </TestCase>

  <TestCase name="Add Male Patient">
    <Request method="POST" uri="/api/patient">
      <![CDATA[
      {
        "id":"X",
        "name":"Test",
        "villageNumber":"32",
        "zoneNumber":"1",
        "birthYear":1990,
        "sex":0,
        "lastUpdated":"2019-09-20 20:12:32"
      }
      ]]>
    </Request>
    <Response status="200"/>
  </TestCase>

  <TestCase name="Add Female Patient">
    <Request method="POST" uri="/api/patient">
      <![CDATA[
      {
        "id":"1000",
        "name":"Not Important To This Test",
        "villageNumber":"0",
        "zoneNumber":"1",
        "birthYear":2000,
        "sex":1,
        "lastUpdated":"2019-09-20 20:12:32"
      }
      ]]>
    </Request>
    <Response status="200"/>
  </TestCase>

  <TestCase name="Add Unkown Gender Patient">
    <Request method="POST" uri="/api/patient">
      <![CDATA[
      {
        "id":"1000",
        "name":"Not Important To This Test",
        "villageNumber":"0",
        "zoneNumber":"1",
        "birthYear":2000,
        "sex":2,
        "lastUpdated":"2019-09-20 20:12:32"
      }
      ]]>
    </Request>
    <Response status="200"/>
  </TestCase>

  <TestCase name="Get Mock Reading View">
    <!-- TODO: update this test once actual ReadingManager is implemented -->
    <Request method="GET" uri="/api/reading/1"/>
    <Response status="200">
      <![CDATA[
      {
        "id":1,
        "patientId":"001",
        "systolic":110,
        "diastolic":80,
        "heartRate":70,
        "colour":0,
        "pregnant":true,
        "gestationalAge":90,
        "symptoms":["Headache"],
        "timestamp":"2019-10-24 09:32:10",
        "otherSymptoms":null
      }
      ]]>
    </Response>
  </TestCase>

  <TestCase name="Create New Reading">
    <Request method="POST" uri="/api/reading/save">
      <![CDATA[
      {
        "patientId":"001",
        "systolic":110,
        "diastolic":80,
        "heartRate":70,
        "colour":0,
        "pregnant":true,
        "gestationalAge":90,
        "symptoms":["Headache"],
        "timestamp":"2019-10-24 09:32:10"
      }
      ]]>
    </Request>
    <Response status="200"/>
  </TestCase>

  <TestCase name="Create New Reading With Missing Symptoms">
    <Request method="POST" uri="/api/reading/save">
      <![CDATA[
      {
        "patientId":"001",
        "systolic":110,
        "diastolic":80,
        "heartRate":70,
        "colour":0,
        "pregnant":true,
        "gestationalAge":90,
        "timestamp":"2019-10-24 09:32:10",
      }
      ]]>
    </Request>
    <Response status="400"/>
  </TestCase>
    <TestCase name="Create New Referral">
        <Request method="POST" uri="/api/referral/send">
            <![CDATA[
            {
                "patientName": "HY",
                "patientId": "001",
                "patientAge": 15,
                "gestationAge": 60,
                "systolic": 25,
                "diastolic": 20,
                "heartRate": 30,
                "readingColour": 1,
                "readingTimestamp": "2019-10-23T02:25:43.453",
                "referralTimestamp": "2019-10-23 19:28:39.887",
                "healthCentre": "Twilio",
                "VHT": "vht",
                "comments": ""
            }
            ]]>
        </Request>
        <Response status="200"/>
    </TestCase>
</TestSuite>
